---
import WorkshopDetail from "../components/workshop/workshop-detail.astro";
import Workshop from "../components/workshop/Workshop.astro";

import SpeakerFull from "../components/people/SpeakerFull.astro";
import CommonLayout from "../layouts/CommonLayout.astro";
import Divider from "../components/Divider.astro";
import type { Code } from "astro:components";

const workshops = await Astro.glob('./workshops/*.md');
const trainers = await Astro.glob('./people/trainers/*.md');
---

<CommonLayout title="Workshops" header="Workshops" withLogo>
    <section class="container py-12 space-y-6">
        <div class="grid xl:cols-12" id="workshops">
            <div class="xl:col-start-4 xl:col-end-10 space-y-12">
                <div
                    class="abouttext text-center md:col-start-3 md:col-end-11 xl:col-start-4 xl:col-end-10"
                    style="font-size: smaller;"
                >
                {workshops.map(( workshop )  =>
                    <Fragment>
                        <a href={`#${workshop.frontmatter.slug}`}>{workshop.frontmatter.slug}</a> &bullet;
                    </Fragment>
                )}
                </div>
                
                <slot />

                {workshops.map(( workshop )  =>
                <Workshop>
                    <WorkshopDetail {...workshop.frontmatter} content={workshop.compiledContent()} />
                    {trainers
                        .filter((trainer) => trainer.frontmatter.workshop == workshop.frontmatter.slug)
                        .map((workshopTrainer) =>
                        <div class="space-y-3">
                            <h4>Workshop by</h4>
                        </div>
                        <SpeakerFull {...workshopTrainer.frontmatter} bio={workshopTrainer.compiledContent()} />
                    )}
                    <div class="space-y-3">
                        <h4>Get your ticket!</h4>
                        <p>
                            Workshop tickets are available in combination with a conference ticket. Get them <a href="https://www.eventbrite.nl/e/rust-week-2025-tickets-1001676961757?aff=oddtdtcreator">here</a>.
                        </p>
                    </div>
                </Workshop>
                <Divider />
                )}
                
            </div>
        </div>
    </section>
</CommonLayout>

<style lang="scss">
@use "../styles/variables.scss";
h4 {
    font-size: variables.$font-size-lg;
    }
</style>
